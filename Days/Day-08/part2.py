data = """........5..................................e..3...
.......q...........m................e.............
....m.......................................e.....
.........................................C........
.u.m........................8.....................
...........7......9.......8...........F...s.......
6...q..............................s..............
..................................................
..................................................
..................................................
..........9....................F..................
.................................M....D...........
.........U........................................
..q................................8..............
.......9..........................................
0....6.....................e..Qs...............F..
.................................Q...D............
.0.u....................................2.........
..................................................
........u................Q........................
.....E........1...................................
...n....v....................................3....
......u..0................N.......................
............................................z.....
.........7....U.........4.....Z...Q.....D.....V...
..............n1.........f.................2......
E.............................f..............z....
...E........1.Z.......U......................D....
.......n...v....7Z...N............................
..........7..N.....Zf...........................3.
................................b............V....
............4..................................9..
..n...v........................5................2.
.........v.................5.........S............
..........................s.......................
.....U.........4..C.....................S..V......
..................................................
......................c........b............M.....
...........4.Wc....d.......1.....b.....S..........
..E........c............................5......z..
..............w..C....................SM.2........
........................d.........................
...............c......C3..........................
...............w....W.............................
..................................................
.........d.......B....w...........................
....B.....W.......dw..........................M...
...............W......................N...V.......
.B................................................
....................B...............b............."""
sample = """............
........0...
.....0......
.......0....
....0.......
......A.....
............
............
........A...
.........A..
............
............"""

lines = data.splitlines()
antennas = {}
antinodes = []

for y in range(len(lines)):
    for x in range(len(lines[y])):
        char = lines[y][x]
        if char == ".":
            continue

        if antennas.get(char):
            antennas[char].append((x, y))
        else:
            antennas[char] = [(x, y)]

for key in antennas.keys():
    positions = antennas[key]
    if len(positions) < 2:
        continue

    for first in positions:
        for second in positions:
            if first == second:
                continue

            antinode = first
            offset = (second[0] - first[0], second[1] - first[1])
            while not (antinode[0] > len(lines[0]) - 1 or antinode[0] < 0 or antinode[1] > len(lines) - 1 or antinode[1] < 0):
                if not antinode in antinodes:
                    antinodes.append(antinode)
                antinode = (antinode[0] + offset[0], antinode[1] + offset[1])

print(len(antinodes))